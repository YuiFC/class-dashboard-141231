import{_ as V,r as d,c as u,e,l as x,a as t,b as r,f as v,F as z,j as B,m as E,p as I,w as y,o,n as M,h as f,t as N,s as T,E as A,q as K}from"./index-vBUVIBNg.js";const F={class:"chat-container"},P={class:"chat-layout"},R={class:"message-item ai"},U={class:"avatar"},W={class:"avatar"},j={class:"bubble"},q={style:{"white-space":"pre-wrap"}},D={key:0,class:"message-item ai"},H={class:"avatar"},L={class:"input-area"},S={class:"send-btn-wrapper"},G={__name:"ChatView",setup(J){const _=d([]),a=d(""),n=d(!1),i=d(null),m=async()=>{if(!a.value.trim()||n.value)return;const p=a.value.trim();_.value.push({role:"user",content:p}),a.value="",h(),n.value=!0;try{const s=await T.post("/chat",{message:p});_.value.push({role:"ai",content:s.reply}),h()}catch{A.error("AI æš‚æ—¶å¼€äº†å°å·®ï¼Œè¯·ç¨åŽå†è¯•")}finally{n.value=!1}},h=()=>{K(()=>{i.value&&(i.value.scrollTop=i.value.scrollHeight)})};return(p,s)=>{const c=r("el-avatar"),b=r("el-input"),g=r("Promotion"),w=r("el-icon"),k=r("el-button");return o(),u("div",F,[e("div",P,[s[4]||(s[4]=e("div",{class:"chat-header"},[e("h2",null,"ðŸ¤– ç­çº§ AI åŠ©æ•™"),e("span",{class:"status-badge"},"åœ¨çº¿")],-1)),e("div",{class:"chat-window",ref_key:"chatWindowRef",ref:i},[e("div",R,[e("div",U,[t(c,{size:40,icon:"Cpu",style:{"background-color":"#7d40e7"}})]),s[1]||(s[1]=e("div",{class:"bubble"},[v(" ä½ å¥½åŒå­¦ï¼æˆ‘æ˜¯ä½ çš„ AI åŠ©æ•™ã€‚ "),e("br"),v(" æ— è®ºæ˜¯è¯¾ç¨‹é—®é¢˜ã€ä½œä¸šå›°æƒ‘ï¼Œè¿˜æ˜¯ç”Ÿæ´»çäº‹ï¼Œéƒ½å¯ä»¥é—®æˆ‘å“¦ï¼ ")],-1))]),(o(!0),u(z,null,B(_.value,(l,C)=>(o(),u("div",{key:C,class:M(["message-item",l.role])},[e("div",W,[l.role==="ai"?(o(),f(c,{key:0,size:40,icon:"Cpu",style:{"background-color":"#7d40e7"}})):(o(),f(c,{key:1,size:40,icon:"User",style:{"background-color":"#409eff"}}))]),e("div",j,[e("div",q,N(l.content),1)])],2))),128)),n.value?(o(),u("div",D,[e("div",H,[t(c,{size:40,icon:"Cpu",style:{"background-color":"#7d40e7"}})]),s[2]||(s[2]=e("div",{class:"bubble typing"}," æ­£åœ¨æ€è€ƒ... ",-1))])):x("",!0)],512),e("div",L,[t(b,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=l=>a.value=l),type:"textarea",rows:3,placeholder:"è¾“å…¥ä½ çš„é—®é¢˜ï¼ŒæŒ‰ Ctrl+Enter å‘é€...",resize:"none",onKeydown:E(I(m,["ctrl"]),["enter"])},null,8,["modelValue","onKeydown"]),e("div",S,[t(k,{type:"primary",onClick:m,loading:n.value},{default:y(()=>[s[3]||(s[3]=v(" å‘é€ ",-1)),t(w,{class:"el-icon--right"},{default:y(()=>[t(g)]),_:1})]),_:1},8,["loading"])])])])])}}},Q=V(G,[["__scopeId","data-v-b71f14cd"]]);export{Q as default};
